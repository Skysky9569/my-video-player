<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chill</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #121212;
            color: #e0e0e0;
            margin: 0;
            padding: 20px;
        }

        .main-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .video-section, .playlist-section {
            background-color: #1e1e1e;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
            overflow: hidden;
            width: 100%;
            max-width: 800px;
        }

        header {
            padding: 20px;
            background-color: #2a2a2a;
            border-bottom: 1px solid #333;
        }

        h1 {
            margin: 0;
            font-size: 1.8em;
            color: #ffffff;
            text-align: center;
        }

        .video-wrapper {
            position: relative;
            background-color: #000;
        }

        video {
            width: 100%;
            display: block;
        }

        #loader {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 50px;
            height: 50px;
            border: 5px solid #444;
            border-top: 5px solid #fff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            z-index: 10;
            display: none;
        }

        @keyframes spin {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        .controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 10px;
            display: flex;
            align-items: center;
            gap: 15px;
            background-color: rgba(0, 0, 0, 0.6);
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }

        .video-wrapper:hover .controls {
            opacity: 1;
        }

        .controls button {
            background: none;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }
        
        .progress-container {
            flex-grow: 1;
            position: relative;
            display: flex;
            align-items: center;
            height: 15px;
        }

        #buffer-bar {
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 5px;
            width: 0%;
            background-color: #6c757d;
            border-radius: 5px;
            pointer-events: none;
        }

        #progress-bar, #volume-bar {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
            outline: none;
            cursor: pointer;
        }

        #progress-bar {
            width: 100%;
            height: 5px;
            position: relative;
        }

        #progress-bar::-webkit-slider-runnable-track,
        #volume-bar::-webkit-slider-runnable-track {
            background: rgba(255, 255, 255, 0.3);
            height: 5px;
            border-radius: 5px;
        }

        #progress-bar::-moz-range-track,
        #volume-bar::-moz-range-track {
            background: rgba(255, 255, 255, 0.3);
            height: 5px;
            border-radius: 5px;
        }

        #progress-bar::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: #007bff;
            border-radius: 50%;
            margin-top: -5px; /* CƒÉn gi·ªØa thumb */
        }

        #progress-bar::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: #007bff;
            border-radius: 50%;
            border: none;
        }

        .time-display {
            color: white;
            font-size: 14px;
            min-width: 90px;
        }
        
        .volume-container {
            display: flex;
            align-items: center;
        }

        #volume-bar {
            width: 80px;
            height: 5px;
        }

        #volume-bar::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            background: #fff;
            border-radius: 50%;
            margin-top: -5px;
        }

        #volume-bar::-moz-range-thumb {
            width: 15px;
            height: 15px;
            background: #fff;
            border-radius: 50%;
            border: none;
        }

        .playlist { padding: 20px; }
        h2 { margin-top: 0; border-bottom: 2px solid #333; padding-bottom: 10px; font-size: 1.4em; }
        .playlist-item { padding: 15px; cursor: pointer; border-bottom: 1px solid #333; transition: background-color 0.3s; }
        .playlist-item:last-child { border-bottom: none; }
        .playlist-item:hover { background-color: #2c2c2c; }
        .playlist-item.active { background-color: #007bff; color: #fff; font-weight: bold; }
    </style>
</head>
<body>

<div class="main-container">
    <div class="video-section">
        <header>
            <h1>T·ªïng h·ª£p m√°y c√°i chill=)</h1>
        </header>
            <a href="skibidi.html" style="padding:10px 20px; background:#007bff; color:#fff; text-decoration:none; border-radius:5px;">
                ƒêi ƒë·∫øn About
            </a>

        <div class="video-wrapper">
            <div id="loader"></div>
            <video id="videoPlayer" autoplay></video>
            <div class="controls">
                <button id="play-pause-btn">‚è∏Ô∏è</button>
                <div class="progress-container">
                    <div id="buffer-bar"></div>
                    <input type="range" id="progress-bar" value="0">
                </div>
                <div class="time-display">
                    <span id="current-time">00:00</span> / <span id="duration">00:00</span>
                </div>
                <div class="volume-container">
                    <button id="mute-btn">üîä</button>
                    <input type="range" id="volume-bar" min="0" max="1" step="0.01" value="1">
                </div>
            </div>
        </div>
    </div>
    <div class="playlist-section">
        <div class="playlist">
            <h2>Danh s√°ch ph√°t</h2>
            <div id="playlist-container"></div>
        </div>
    </div>
</div>

<script>
    const videos = [
        { title: "intro 1", filename: "video.mp4" },
        { title: "Anh M·ªát R·ªìi", filename: "anhmetroi.mp4" },
        { title: "Ch·ªù ƒë·ª£i c√≥ ƒë√°ng s·ª£", filename: "chodoicodangsotik1.mp4" },
        { title: "Nh∆∞ anh m∆°", filename: "nhuanhmo.mp4"}
    ];

    // --- L·∫•y c√°c ph·∫ßn t·ª≠ HTML ---
    const videoPlayer = document.getElementById('videoPlayer');
    const playlistContainer = document.getElementById('playlist-container');
    const playPauseBtn = document.getElementById('play-pause-btn');
    const progressBar = document.getElementById('progress-bar');
    const bufferBar = document.getElementById('buffer-bar');
    const currentTimeElem = document.getElementById('current-time');
    const durationElem = document.getElementById('duration');
    const loader = document.getElementById('loader');
    const muteBtn = document.getElementById('mute-btn');
    const volumeBar = document.getElementById('volume-bar');

    let currentVideoIndex = 0;

    // --- C√°c h√†m ch√≠nh ---
    function playVideo(index) {
        if (index >= videos.length || index < 0) return;
        
        loader.style.display = 'block';
        currentVideoIndex = index;
        const video = videos[index];
        videoPlayer.src = `videos/${video.filename}`;
        videoPlayer.load();
        
        const playPromise = videoPlayer.play();
        if (playPromise !== undefined) {
            playPromise.then(() => {
                // Autoplay th√†nh c√¥ng
                playPauseBtn.textContent = '‚è∏Ô∏è';
            }).catch(error => {
                // Autoplay b·ªã ch·∫∑n, t·∫Øt ti·∫øng v√† th·ª≠ l·∫°i
                console.log("Autoplay c√≥ ti·∫øng b·ªã ch·∫∑n, th·ª≠ l·∫°i v·ªõi ch·∫ø ƒë·ªô t·∫Øt ti·∫øng.");
                videoPlayer.muted = true;
                videoPlayer.play();
                playPauseBtn.textContent = '‚è∏Ô∏è';
                updateVolumeUI();
            });
        }
        updateActivePlaylistItem();
    }

    function togglePlayPause() {
        if (videoPlayer.paused) {
            videoPlayer.play();
            playPauseBtn.textContent = '‚è∏Ô∏è';
        } else {
            videoPlayer.pause();
            playPauseBtn.textContent = '‚ñ∂Ô∏è';
        }
    }

    function toggleMute() {
        videoPlayer.muted = !videoPlayer.muted;
        updateVolumeUI();
    }

    function handleVolumeChange() {
        videoPlayer.volume = volumeBar.value;
        videoPlayer.muted = volumeBar.value === '0';
        updateVolumeUI();
    }

    function updateVolumeUI() {
        if (videoPlayer.muted || videoPlayer.volume === 0) {
            muteBtn.textContent = 'üîá';
            volumeBar.value = 0;
        } else {
            muteBtn.textContent = 'üîä';
            volumeBar.value = videoPlayer.volume;
        }
    }

    function createPlaylistItem(video, index) {
        const item = document.createElement('div');
        item.className = 'playlist-item';
        item.textContent = video.title;
        item.dataset.index = index;
        item.onclick = () => { playVideo(index); };
        playlistContainer.appendChild(item);
    }

    function updateActivePlaylistItem() {
        const items = document.querySelectorAll('.playlist-item');
        items.forEach((item, index) => {
            item.classList.toggle('active', index === currentVideoIndex);
        });
    }

    function formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const secs = Math.floor(seconds % 60);
        return `${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }

    // --- G·∫Øn c√°c s·ª± ki·ªán ---
    playPauseBtn.addEventListener('click', togglePlayPause);
    videoPlayer.addEventListener('click', togglePlayPause);
    muteBtn.addEventListener('click', toggleMute);
    volumeBar.addEventListener('input', handleVolumeChange);

    videoPlayer.addEventListener('timeupdate', () => {
        const progressPercentage = (videoPlayer.currentTime / videoPlayer.duration) * 100;
        progressBar.value = progressPercentage;
        currentTimeElem.textContent = formatTime(videoPlayer.currentTime);
    });

    progressBar.addEventListener('input', () => {
        const seekTime = (progressBar.value / 100) * videoPlayer.duration;
        videoPlayer.currentTime = seekTime;
    });

    videoPlayer.addEventListener('progress', () => {
        if (videoPlayer.duration > 0 && videoPlayer.buffered.length > 0) {
            const bufferedEnd = videoPlayer.buffered.end(videoPlayer.buffered.length - 1);
            const bufferPercentage = (bufferedEnd / videoPlayer.duration) * 100;
            bufferBar.style.width = `${bufferPercentage}%`;
        }
    });

    videoPlayer.addEventListener('loadedmetadata', () => {
        durationElem.textContent = formatTime(videoPlayer.duration);
    });
    
    videoPlayer.addEventListener('canplaythrough', () => {
        loader.style.display = 'none';
    });

    videoPlayer.addEventListener('error', () => {
        loader.style.display = 'none';
        console.error("L·ªói khi t·∫£i video!");
    });

    videoPlayer.onended = () => {
        const nextVideoIndex = (currentVideoIndex + 1) % videos.length;
        playVideo(nextVideoIndex);
    };

    // --- Kh·ªüi t·∫°o ---
    videos.forEach(createPlaylistItem);
    if (videos.length > 0) {
        playVideo(1);
    }
</script>
</body>
</html>